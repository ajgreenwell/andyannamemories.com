(this["webpackJsonpmy-memories-website"]=this["webpackJsonpmy-memories-website"]||[]).push([[0],{19:function(e,t){},444:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(44),i=a.n(o),c=(a(50),a(4)),l=a(6),m=a.n(l),s="us-east-1:9f0a27a6-224a-4ec6-8ab9-8ceafe9364cb";function u(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}function d(e,t){t||(t="");try{return function(e){return JSON.parse(window.sessionStorage.getItem(e))}(e)}catch(a){return t}}a(5);function f(e){var t=e.closeErrorBanner,a=e.children;return r.a.createElement("div",{className:"error-banner"},r.a.createElement("p",{className:"error-banner-text"},a),r.a.createElement("button",{className:"error-banner-button",onClick:t},r.a.createElement("i",{className:"error-banner-icon far fa-times-circle"})))}function E(e){var t=e.login,a=e.setIsLoginError,o=Object(n.useState)(""),i=Object(c.a)(o,2),l=i[0],m=i[1];return r.a.createElement("div",{id:"login-portal"},r.a.createElement("div",{id:"login-location"}),r.a.createElement("h1",{id:"login-header"},"You Are Not Logged In."),r.a.createElement("p",{id:"login-subheader"},"In order to access your memories, you must enter the password below. If you can't remember the password, just ask Andy."),r.a.createElement("div",{id:"login-form"},r.a.createElement("h3",{id:"password-label"},"Password:"),r.a.createElement("input",{id:"password-field",type:"text",value:l,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{id:"login-button",onClick:function(){"iamyoursandyouaremine"===l?t():a(!0)}},r.a.createElement("i",{className:"login-icon fas fa-sign-in-alt"}),"Login")))}function h(e){var t=e.href,a=e.children,n=e.handleClick;return r.a.createElement("a",{href:t,className:"nav-item",onClick:n},a)}function b(e){var t=e.isLoggedIn,a=e.logout,n=e.toggleMenu;return r.a.createElement("div",null,t?r.a.createElement("div",{id:"nav-menu"},r.a.createElement(h,{href:"#photo-slideshow-location",handleClick:n},"photos"),r.a.createElement(h,{href:"#public-memories-location",handleClick:n},"public"),r.a.createElement(h,{href:"#private-memories-location",handleClick:n},"private"),r.a.createElement(h,{href:"#login-location",handleClick:function(){a(),n()}},"logout")):r.a.createElement("div",{id:"nav-menu"},r.a.createElement(h,{href:"#login-location",handleClick:n},"login")))}function y(e){var t=e.isLoggedIn,a=e.logout,o=Object(n.useState)(!1),i=Object(c.a)(o,2),l=i[0],m=i[1];function s(){m(!l)}return r.a.createElement("div",{id:"nav-menu-toggle"},r.a.createElement("button",{className:l?"nav-button-fixed nav-button":"nav-button",onClick:s},r.a.createElement("i",{className:"fas fa-bars"})),l&&r.a.createElement(b,{isLoggedIn:t,logout:a,toggleMenu:s}))}function p(e){var t=e.isLoggedIn,a=e.logout;return r.a.createElement("div",{id:"navbar",className:"container"},r.a.createElement("div",{id:"nav-left"},r.a.createElement("i",{id:"logo",className:"fas fa-brain"}),r.a.createElement("div",null,"My Memories")),t?r.a.createElement("div",{id:"nav-right"},r.a.createElement(h,{href:"#photo-slideshow-location"},"photos"),r.a.createElement(h,{href:"#public-memories-location"},"public"),r.a.createElement(h,{href:"#private-memories-location"},"private"),r.a.createElement(h,{href:"#login-location",handleClick:a},"logout")):r.a.createElement("div",{id:"nav-right"},r.a.createElement(h,{href:"#login-location"},"login")),r.a.createElement(y,{isLoggedIn:t,logout:a}))}function v(){return r.a.createElement("div",{id:"about"},r.a.createElement("h1",{id:"about-header"},"Welcome to My Memories."),r.a.createElement("p",{id:"about-subheader"},"Use the sections below to view, add, modify or remove memories from your vault."))}function g(e){var t=e.src,a=e.idx,n=0===a?"visible":"hidden";return r.a.createElement("img",{id:"slideshow-photo-".concat(a),className:n,src:t,alt:"A memory from Andy and Anna's past",width:"92%",height:"92%"})}function w(e){var t=e.memory,a=e.idx,n=0===a?"visible":"hidden",o=t.writtenMemory?t.writtenMemory:t.memory;return r.a.createElement("div",null,r.a.createElement("p",{id:"slideshow-caption-".concat(a),className:n},o),0===a?r.a.createElement("p",{id:"hidden-caption-".concat(a),style:{display:"block"}},o):r.a.createElement("p",{id:"hidden-caption-".concat(a)},o))}function M(e){var t=e.memories,a=Object(n.useState)(0),o=Object(c.a)(a,2),i=o[0],l=o[1];function m(e){var a,n=i+e;n<0?n=t.length-1:n>=t.length&&(n=0),a=i,document.querySelector("#slideshow-photo-".concat(a)).style.opacity="0",function(e){document.querySelector("#slideshow-caption-".concat(e)).style.opacity="0",document.querySelector("#hidden-caption-".concat(e)).style.display="none"}(i),function(e){document.querySelector("#slideshow-photo-".concat(e)).style.opacity="1"}(n),function(e){document.querySelector("#slideshow-caption-".concat(e)).style.opacity="1",document.querySelector("#hidden-caption-".concat(e)).style.display="block"}(n),l(n)}return r.a.createElement("div",null,r.a.createElement("div",{id:"photo-slideshow",className:"container"},r.a.createElement("div",{id:"photo-slideshow-location"}),r.a.createElement("h2",null,"The Memories You've Captured."),r.a.createElement("div",{id:"slideshow"},r.a.createElement("button",{className:"slideshow-button",onClick:function(){return m(-1)}},r.a.createElement("i",{className:"slideshow-button-icon fas fa-arrow-circle-left"})),r.a.createElement("div",{id:"slideshow-photos"},t.map((function(e,a){return r.a.createElement(g,{src:e.photo,idx:t.length-1-a,key:a})}))),r.a.createElement("button",{className:"slideshow-button",onClick:function(){return m(1)}},r.a.createElement("i",{className:"slideshow-button-icon fas fa-arrow-circle-right"}))),r.a.createElement("div",{id:"slideshow-captions"},r.a.createElement("i",{id:"quote-left",className:"fas fa-quote-left"}),t.map((function(e,a){return r.a.createElement(w,{memory:e,idx:t.length-1-a,key:a})})),r.a.createElement("i",{id:"quote-right",className:"fas fa-quote-right"}))))}function N(e){var t=e.memory.memory,a=e.memoryId,o=e.idx,i=e.swapMemories,l=e.updateMemory,m=e.deleteMemory,s=Object(n.useState)(!t||!1),u=Object(c.a)(s,2),d=u[0],f=u[1],E=Object(n.useState)(!1),h=Object(c.a)(E,2),b=h[0],y=h[1],p=Object(n.useState)(t),v=Object(c.a)(p,2),g=v[0],w=v[1];return r.a.createElement("div",{id:a,className:"memory"},d?r.a.createElement("textarea",{className:"memory-input",value:g,onChange:function(e){return w(e.target.value)},autoFocus:!0}):r.a.createElement("p",{className:"memory-text"},g),r.a.createElement("div",{className:"memory-buttons"},r.a.createElement("div",{className:"memory-buttons-left"},d?r.a.createElement("button",{className:"memory-button",onClick:function(){f(!1),l(g,o)}},r.a.createElement("i",{className:"memory-button-icon fas fa-save"}),"Save"):r.a.createElement("button",{className:"memory-button",onClick:function(){return f(!0)}},r.a.createElement("i",{className:"memory-button-icon fas fa-edit"}),"Edit"),r.a.createElement("button",{className:"memory-button",onClick:function(){return y(!0)}},r.a.createElement("i",{className:"memory-button-icon fas fa-times-circle"}),"Delete")),r.a.createElement("div",{className:"memory-buttons-right"},r.a.createElement("button",{className:"slideshow-button",onClick:function(){return i(o-1,o)}},r.a.createElement("i",{className:"slideshow-button-icon fas fa-arrow-circle-up"})),r.a.createElement("button",{className:"slideshow-button",onClick:function(){return i(o,o+1)}},r.a.createElement("i",{className:"slideshow-button-icon fas fa-arrow-circle-down"})))),b&&r.a.createElement("div",null,r.a.createElement("h3",{className:"delete-confirmation-text"},"Are you sure you want to delete this memory?"),r.a.createElement("div",null,r.a.createElement("button",{className:"memory-button",onClick:function(){return function(e){y(!1),m(e)}(o)}},r.a.createElement("i",{className:"memory-button-icon fas fa-check-circle"}),"Yes, Delete this Memory"),r.a.createElement("button",{className:"memory-button",onClick:function(){return y(!1)}},r.a.createElement("i",{className:"memory-button-icon fas fa-times-circle"}),"No, Keep this Memory"))))}function k(e){var t=e.isPublic,a=e.memories,n=e.swapMemories,o=e.updateMemory,i=e.deleteMemory,c=e.addMemory;return r.a.createElement("div",null,a.map((function(e,a){var c=t?"public-memory-".concat(a):"private-memory-".concat(a);return r.a.createElement(N,{memory:e,memoryId:c,key:e.memory,idx:a,swapMemories:n,updateMemory:o,deleteMemory:i})})),r.a.createElement("div",{className:"new-memory-container"},r.a.createElement("button",{className:"new-memory-button",onClick:c},r.a.createElement("i",{className:"new-memory-icon fas fa-plus-circle"}),"New Memory")))}function C(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"public-memories",className:"container"},r.a.createElement("div",{id:"public-memories-location"}),r.a.createElement("h2",null,"The Memories You Might Share."),e.isError?r.a.createElement("p",null,"There was a problem retrieving the memories from your bank. Tell Andy and he can fix the problem."):r.a.createElement(k,{isPublic:!0,memories:e.publicMemories,swapMemories:e.swapPublicMemories,addMemory:e.addPublicMemory,updateMemory:e.updatePublicMemory,deleteMemory:e.deletePublicMemory})))}function O(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"private-memories",className:"container"},r.a.createElement("div",{id:"private-memories-location"}),r.a.createElement("h2",null,"The Memories You Definitely Wouldn't Share."),e.isError?r.a.createElement("p",null,"There was a problem retrieving the memories from your bank. Tell Andy and he can fix the problem."):r.a.createElement(k,{isPublic:!1,memories:e.privateMemories,swapMemories:e.swapPrivateMemories,addMemory:e.addPrivateMemory,updateMemory:e.updatePrivateMemory,deleteMemory:e.deletePrivateMemory})))}function I(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),l=Object(c.a)(i,2),h=l[0],b=l[1],y=Object(n.useState)([]),g=Object(c.a)(y,2),w=g[0],N=g[1],k=Object(n.useState)([]),I=Object(c.a)(k,2),S=I[0],P=I[1],j=Object(n.useState)(d("isLoggedIn",!1)),T=Object(c.a)(j,2),x=T[0],A=T[1],L=Object(n.useState)(!1),B=Object(c.a)(L,2),D=B[0],Y=B[1],J=Object(n.useState)(!1),q=Object(c.a)(J,2),Q=q[0],U=q[1],V=Object(n.useState)(!1),K=Object(c.a)(V,2),F=K[0],W=K[1];function R(e,t){S.forEach((function(a){return function(e,t,a){m.a.config.region="us-east-1",m.a.config.credentials=new m.a.CognitoIdentityCredentials({IdentityPoolId:s});var n=new m.a.DynamoDB.DocumentClient,r={TableName:"MyMemories",Key:{userId:e},UpdateExpression:"set mapAttr.allMemories.".concat(a?"cleanMemories":"dirtyMemories"," = :c"),ExpressionAttributeValues:{":c":t}};n.update(r,(function(e,t){e&&(console.log("Error retrieving memories:",e),U(!0))}))}(a,e,t)}))}function X(e,t){var n=t?e>=a.length:e>=h.length;return e<0||n}function Z(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}return Object(n.useEffect)((function(){m.a.config.region="us-east-1",m.a.config.credentials=new m.a.CognitoIdentityCredentials({IdentityPoolId:s}),(new m.a.DynamoDB.DocumentClient).scan({TableName:"MyMemories"},(function(e,t){var a=t.Items;if(e)console.log("Error retrieving memories:",e),Y(!0);else{var n=a.filter((function(e){return"amzn1.ask.account.AH7RB5BFVJFQYUKCIJETYJFJQ6XN3YEM3Y2VRMM2YPW45IQYQ4PTQOXST4VALADEMBIDPUB2L5USBUTT3RQP47CLZX5O26GMGL4KDWFI3RTLTU2ZQ6PK7LAUJTHWN6YDZH6MPFXQKN4VGATYX76CETBVJ2VTJUK3NTSP442VHXV7Z6ZSOCFARBOP3TDYEZB3RM765QK735MCHEQ"===e.userId}))[0].mapAttr.allMemories,r=a.map((function(e){return e.userId})),i=function(e){var t=[];return e.forEach((function(e){e.photo&&t.push(e)})),t}(n.cleanMemories);o(n.cleanMemories),b(n.dirtyMemories),P(r),N(i)}}))}),[]),r.a.createElement("div",null,D&&r.a.createElement(f,{closeErrorBanner:function(){return Y(!1)}},"There was a problem while retrieving your memories from the database. Tell Andy and he can fix the problem."),Q&&r.a.createElement(f,{closeErrorBanner:function(){return U(!1)}},"There was a problem while updating the database. Tell Andy and he can fix the problem."),F&&r.a.createElement(f,{closeErrorBanner:function(){return W(!1)}},"The password you entered is incorrect. Please try again."),r.a.createElement(p,{isLoggedIn:x,logout:function(){A(!1),u("isLoggedIn",!1)}}),r.a.createElement(v,null),x?r.a.createElement("div",null,r.a.createElement(M,{memories:w}),r.a.createElement(C,{isError:D,publicMemories:a,addPublicMemory:function(){var e=a.slice();e.push({memory:""});var t=e.length;Z(e,t-1,t-2),o(e)},updatePublicMemory:function(e,t){var n=a.slice();n[t].memory=e,o(n),R(n,!0)},deletePublicMemory:function(e){var t=a.slice();t.splice(e,1),o(t),R(t,!0)},swapPublicMemories:function(e,t){if(!X(e,!0)&&!X(t,!0)){var n=a.slice();Z(n,e,t),o(n),R(n,!0)}}}),r.a.createElement(O,{isError:D,privateMemories:h,updatePrivateMemory:function(e,t){var a=h.slice();a[t].memory=e,b(a),R(a,!1)},addPrivateMemory:function(){var e=h.slice();e.push({memory:""});var t=e.length;Z(e,t-1,t-2),b(e)},deletePrivateMemory:function(e){var t=h.slice();t.splice(e,1),b(t),R(t,!1)},swapPrivateMemories:function(e,t){if(!X(e,!1)&&!X(t,!1)){var a=h.slice();Z(a,e,t),b(a),R(a,!1)}}})):r.a.createElement(E,{login:function(){W(!1),A(!0),u("isLoggedIn",!0)},setIsLoginError:W}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,a){e.exports=a(444)},5:function(e,t,a){},50:function(e,t,a){}},[[45,1,2]]]);
//# sourceMappingURL=main.d042bcf7.chunk.js.map